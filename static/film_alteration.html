<html>
  <head>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <meta name="viewport" content="width=device-width, initial-scale = 1.0" />
    <title>Film Alteration</title>

    <link rel="stylesheet" href="film_alteration.css" />
  </head>

  <body>
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-5HZHZH"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
        lazy="true"
      ></iframe>
    </noscript>

    <body>
      <div class="hero">
        <nav>
          <a href="manager_login_frontpage.html">
          <img src="images/MFA.png" class="logo" />
          <ul>
            <li><a href="manager_login_frontpage.html">Home</a></li>
            <li><a href="">About</a></li>
            <li><a href="">Collection</a></li>
            <li><a href="">Exhibitions</a></li>
            <li><a href="">Tickets</a></li>
            <li><a href="">Shop</a></li>
            <li><a href="manager_database.html">Database</a></li>
            <li><a href="frontpage.html">Log Out</a></li>
          </ul>
        </nav>

    <div>
      <h1 class="title-align" style="color:rgb(222, 44, 44)">Film Alteration</h1>

      <div id="formContainer" class="inner">
        <label for="filmNameInput"> Film Name: </label>
        <input
          type="text"
          id="filmNameInput"
          placeholder="Enter the film's name"
        />

        <label for="runtimeInput"> Runtime: </label>
        <input
          type="text"
          id="runtimeInput"
          placeholder="hours:minutes:seconds (hh:mm:ss)"
        />

        <label for="filmIDInput"> Film ID: </label>
        <input
          type="number"
          id="filmIDInput"
          placeholder="Enter a valid film ID"
        />

        <label for="startDateInput"> Start Date: </label>
        <input
          type="date"
          id="startDateInput"
        />

        <label for="endDateInput"> End Date: </label>
        <input
          type="date"
          id="endDateInput"
        />

        <label for="descriptionInput"> Descripton: </label>
        <textarea id="descriptionInput" placeholder="Enter a description of the item"></textarea>


        <button onclick="validateAndAddData()">Add</button>
      </div>
    </div>
      </div>

    <table id="outputTable">
      <tr>
        <th>Film Name</th>
        <th>Runtime</th>
        <th>Film ID</th>
        <th>Start Date:</th>
        <th>End Date:</th>
        <th>Description</th>
      </tr>
    </table>

    <script>

function validateAndAddData() {
    let filmName = document.getElementById("filmNameInput").value;
    let runtime = document.getElementById("runtimeInput").value;
    let filmID = document.getElementById("filmIDInput").value;
    let startDate = document.getElementById("startDateInput").value;
    let endDate = document.getElementById("endDateInput").value;
    let description = document.getElementById("descriptionInput").value;


    if (!filmName || !runtime || !filmID || !startDate || !endDate || !description) {
        alert("All categories need to be filled out.");
        return;
    }


    if (filmName.length > 200) {
        alert("Film name should be at most 200 characters.");
        return;
    }

    if (!/^(\d{2}:\d{2}:\d{2})$/.test(runtime)) {
        alert("Runtime should be in the format 'hh:mm:ss' (e.g., '01:25:12').");
        return;
    }



    if (filmID.length !== 8) {
        alert("Film ID must be exactly 8 digits.");
        return;
    }

    if (new Date(startDate) > new Date(endDate)) {
        alert("Start date cannot be after the end date.");
        return;
    }

    if (new Date(endDate) < new Date(startDate)) {
        alert("End date cannot be before the start date.");
        return;
    }

    if (description.length > 1000) {
        alert("Description should be at most 1000 characters.");
        return;
    }


    addData();
}
      function addData() {

        let filmName = document.getElementById("filmNameInput").value;
        let runtime = document.getElementById("runtimeInput").value;
        let filmID = document.getElementById("filmIDInput").value;
        let startDate = document.getElementById("startDateInput").value;
        let endDate = document.getElementById("endDateInput").value;
        let description = document.getElementById("descriptionInput").value;

        let table = document.getElementById("outputTable");
        let newRow = table.insertRow(table.rows.length);

        newRow.insertCell(0).innerHTML = filmName;
        newRow.insertCell(1).innerHTML = runtime;
        newRow.insertCell(2).innerHTML = filmID;
        newRow.insertCell(3).innerHTML = startDate;
        newRow.insertCell(4).innerHTML = endDate;
        newRow.insertCell(5).innerHTML = description;
        newRow.insertCell(6).innerHTML =
          '<button onclick="editData(this)">Edit</button>' +
          '<button onclick="deleteData(this)">Delete</button>';
    

        clearInputs();
      }
    
      function editData(button) {

  let row = button.parentNode.parentNode;


  let filmNameCell = row.cells[0];
  let runtimeCell = row.cells[1];
  let filmIDCell = row.cells[2];
  let startDateCell = row.cells[3];
  let endDateCell = row.cells[4];
  let descriptionCell = row.cells[5];

  let filmNameInput = prompt(
    "Enter the updated film name:",
    filmNameCell.innerHTML
  );
  let runtimeInput = prompt(
    "Enter the updated runtime:",
    runtimeCell.innerHTML
  );
  let filmIDInput = prompt(
    "Enter the updated film ID:",
    filmIDCell.innerHTML
  );
  let startDateInput = prompt(
    "Enter the updated start date:",
    startDateCell.innerHTML
  );
  let endDateInput = prompt(
    "Enter the updated end date:",
    endDateCell.innerHTML
  );
  let descriptionInput = prompt(
    "Enter the updated description:",
    descriptionCell.innerHTML
  );


  if (!filmNameInput || !runtimeInput || !filmIDInput || !startDateInput || !endDateInput || !descriptionInput) {
    alert("All categories need to be filled out.");
    return;
  }

  if (filmNameInput.length > 200) {
    alert("Film name should be at most 200 characters.");
    return;
  }

  if (!/^(\d{2}:\d{2}:\d{2})$/.test(runtimeInput)) {
    alert("Runtime should be in the format 'hh:mm:ss' (e.g., '01:25:12').");
    return;
  }


  if (filmIDInput.length !== 8) {
    alert("Film ID must be exactly 8 digits.");
    return;
  }

  if (new Date(startDateInput) > new Date(endDateInput)) {
    alert("Start date cannot be after the end date.");
    return;
  }

  if (new Date(endDateInput) < new Date(startDateInput)) {
    alert("End date cannot be before the start date.");
    return;
  }

  if (descriptionInput.length > 1000) {
    alert("Description should be at most 1000 characters.");
    return;
  }

  filmNameCell.innerHTML = filmNameInput;
  runtimeCell.innerHTML = runtimeInput;
  filmIDCell.innerHTML = filmIDInput;
  startDateCell.innerHTML = startDateInput;
  endDateCell.innerHTML = endDateInput;
  descriptionCell.innerHTML = descriptionInput;
}

    
      function deleteData(button) {
        // Get the parent row of the clicked button
        let row = button.parentNode.parentNode;
    
        // Remove the row from the table
        row.parentNode.removeChild(row);
      }
    
      function clearInputs() {
        // Clear input fields
        document.getElementById("filmNameInput").value = "";
        document.getElementById("runtimeInput").value = "";
        document.getElementById("filmIDInput").value = "";
        document.getElementById("startDateInput").value = "";
        document.getElementById("endDateInput").value = "";
        document.getElementById("descriptionInput").value = "";
      }
    </script>
    
  </body>
</html>
